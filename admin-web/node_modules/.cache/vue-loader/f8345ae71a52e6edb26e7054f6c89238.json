{"remainingRequest":"/Users/thossaporn/Downloads/game/admin-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/thossaporn/Downloads/game/admin-web/src/components/pages/profile/profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/thossaporn/Downloads/game/admin-web/src/components/pages/profile/profile.vue","mtime":1627898894350},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/cache-loader/dist/cjs.js","mtime":1661273170805},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/babel-loader/lib/index.js","mtime":1661273171333},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/cache-loader/dist/cjs.js","mtime":1661273170805},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/vue-loader/lib/index.js","mtime":1661273161751}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgQWRtaW5TZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvQWRtaW5TZXJ2aWNlIjsNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQgeyBiYXNlVVJMIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZXMvYXBpJzsNCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL1VzZXJTZXJ2aWNlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBmb3JtOiB7DQogICAgICAgIHV1aWQ6ICIiLA0KICAgICAgICAvLyB1c2VybmFtZTogIiIsDQogICAgICAgIGluZm9fbmFtZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIH0sDQogICAgICB1dWlkOiAiIiwNCiAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgIGluZm9fbmFtZTogJycsDQogICAgICBwYXNzd29yZDogIiIsDQogICAgICBwcm9maWxlOiBbXSwNCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KdGhpcy5jaGVja0F1dGgoKTsNCg0KICAgIGF4aW9zKHsNCiAgICAgIG1ldGhvZDogImdldCIsDQogICAgICB1cmw6IGAke2Jhc2VVUkx9L3VzZXIvcHJvZmlsZWAsDQogICAgICBoZWFkZXJzOiB7DQogICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsDQogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJhY2Nlc3NfdG9rZW4iKSwNCiAgICAgIH0sDQogICAgfSkNCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLmZvcm0uaW5mb19uYW1lID0gcmVzcG9uc2UuZGF0YS5kYXRhLmluZm9fbmFtZTsNCiAgICAgICAgdGhpcy5mb3JtLnV1aWQgPSByZXNwb25zZS5kYXRhLmRhdGEudXVpZDsNCg0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogIH0sDQogDQogIG1ldGhvZHM6IHsNCiAgICBhc3luYyBjaGVja0F1dGgoKXsNCiAgICAgICBjb25zdCByZXMgPSBhd2FpdCBVc2VyU2VydmljZS5nZXRQcm9maWxlKCkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgIGlmKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gIDQwMSB8fCBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDUwMCl7DQogICAgICBjb25zdCByZW1vdmVUb2tlbiA9IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJhY2Nlc3NfdG9rZW4iKTsNCiAgICAgICAgaWYgKHJlbW92ZVRva2VuID09IG51bGwpIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOw0KICAgICAgfQ0KICAgICAgfQ0KICAgICAgfSk7DQogICAgICByZXMubG9nb3V0DQogICAgfSwNCiAgICBhc3luYyBwcm9maWxlRWRpdGUoKSB7DQogICAgICBjb25zdCB1dWlkID0gdGhpcy5mb3JtLnV1aWQ7DQogICAgICBheGlvcw0KICAgICAgICAucHV0KGJhc2VVUkwgKyAiL3VzZXIvIiArIHV1aWQsIHRoaXMuZm9ybSwgew0KICAgICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbiIsDQogICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiYWNjZXNzX3Rva2VuIiksDQogICAgICAgICAgfSwNCiAgICAgICAgfSkNCiAgICAgICAgLnRoZW4oKCkgPT4gew0KICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoIuC5gOC4o+C4teC4ouC4muC4o+C5ieC4reC4ouC5geC4peC5ieC4pyIsIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wLXJpZ2h0IiwNCiAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAsDQogICAgICAgICAgICBpY29uOiB0cnVlLA0KICAgICAgICAgICAgcnRsOiBmYWxzZSwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICAvL1BlcmZvcm0gU3VjY2VzcyBBY3Rpb24NCiAgICAgICAgfSkNCiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcigi4LmE4Lih4LmI4LiW4Li54LiB4LiV4LmJ4Lit4LiHIiwgew0KICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLA0KICAgICAgICAgICAgdGltZW91dDogMTUwMCwNCiAgICAgICAgICAgIGljb246IHRydWUsDQogICAgICAgICAgICBydGw6IGZhbHNlLA0KICAgICAgICAgIH0pOw0KICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCgiL3Byb2ZpbGUiKTsNCg0KICAgICAgICAgIC8vIGVycm9yLnJlc3BvbnNlLnN0YXR1cyBDaGVjayBzdGF0dXMgY29kZQ0KICAgICAgICB9KQ0KICAgICAgICAuZmluYWxseSgoKSA9PiB7DQogICAgICAgICAgLy9QZXJmb3JtIGFjdGlvbiBpbiBhbHdheXMNCiAgICAgICAgfSk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"profile.vue","sourceRoot":"src/components/pages/profile","sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <div class=\"page-inner\">\r\n      <div class=\"page-header\">\r\n        <h4 class=\"page-title\">\r\n          <i class=\"fas fa-user-astronaut    \"></i>  ข้อมูลแอดมิน\r\n        </h4>\r\n        <ul class=\"breadcrumbs\"></ul>\r\n      </div>\r\n      <div class=\"row\">\r\n        <div class=\"col-md-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-header\">\r\n              <h4 class=\"card-title\">ข้อมูล</h4>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <form v-on:submit.prevent=\"profileEdite\">\r\n                <div class=\"form-group row\">\r\n                  <label class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\">\r\n                   ชื่อ:\r\n                    <span class=\"required-label\">*(Info)</span>\r\n                  </label>\r\n                 \r\n                    <div>\r\n                      <small id=\"emailHelp\" class=\"form-text text-muted\"></small>\r\n                    </div>\r\n                    <input\r\n                      v-model=\"form.info_name\"\r\n                      required\r\n                      type=\"text\"\r\n                      class=\"form-control col-lg-4 col-md-9 col-sm-8\"\r\n                      aria-describedby=\"helpId\"\r\n                      value=\"info_name\"\r\n                    />\r\n                  \r\n                </div>\r\n\r\n                <div class=\"form-group row\">\r\n                  <label for=\"password\" class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\">\r\n                    Password:\r\n                    <span class=\"required-label\">*</span>\r\n                  </label>\r\n                \r\n                    <input\r\n                      type=\"password\"\r\n                      class=\"form-control col-lg-4 col-md-9 col-sm-8\"\r\n                      name=\"password\"\r\n                      id=\"password\"\r\n                      placeholder=\"PASSWORD\"\r\n                      v-model=\"form.password\"\r\n                      required\r\n                    />\r\n                  \r\n                </div>\r\n\r\n                <div class=\"form-group\">\r\n                  <button class=\"btn btn-primary float-right\">\r\n                    <i class=\"fa fa-check\" aria-hidden=\"true\"></i>\r\n                    ยืนยัน</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import AdminService from \"@/services/AdminService\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from '../../../services/api';\r\nimport UserService from \"@/services/UserService\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      form: {\r\n        uuid: \"\",\r\n        // username: \"\",\r\n        info_name: \"\",\r\n        password: \"\",\r\n      },\r\n      uuid: \"\",\r\n      username: \"\",\r\n      info_name: '',\r\n      password: \"\",\r\n      profile: [],\r\n    };\r\n  },\r\n  mounted() {\r\nthis.checkAuth();\r\n\r\n    axios({\r\n      method: \"get\",\r\n      url: `${baseURL}/user/profile`,\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        this.form.info_name = response.data.data.info_name;\r\n        this.form.uuid = response.data.data.uuid;\r\n\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n \r\n  methods: {\r\n    async checkAuth(){\r\n       const res = await UserService.getProfile().catch(function (error) {\r\n        if(error.response.status ===  401 || error.response.status === 500){\r\n      const removeToken = localStorage.removeItem(\"access_token\");\r\n        if (removeToken == null) {\r\n        this.$router.push(\"/login\");\r\n      }\r\n      }\r\n      });\r\n      res.logout\r\n    },\r\n    async profileEdite() {\r\n      const uuid = this.form.uuid;\r\n      axios\r\n        .put(baseURL + \"/user/\" + uuid, this.form, {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"access_token\"),\r\n          },\r\n        })\r\n        .then(() => {\r\n          this.$toast.success(\"เรียบร้อยแล้ว\", {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n            icon: true,\r\n            rtl: false,\r\n          });\r\n          //Perform Success Action\r\n        })\r\n        .catch((error) => {\r\n          console.log(error);\r\n          this.$toast.error(\"ไม่ถูกต้อง\", {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n            icon: true,\r\n            rtl: false,\r\n          });\r\n        // this.$router.push(\"/profile\");\r\n\r\n          // error.response.status Check status code\r\n        })\r\n        .finally(() => {\r\n          //Perform action in always\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}