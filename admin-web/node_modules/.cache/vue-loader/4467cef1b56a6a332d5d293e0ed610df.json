{"remainingRequest":"/Users/thossaporn/Downloads/game/admin-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/thossaporn/Downloads/game/admin-web/src/components/pages/employee/employee.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/thossaporn/Downloads/game/admin-web/src/components/pages/employee/employee.vue","mtime":1627898894345},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/cache-loader/dist/cjs.js","mtime":1661273170805},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/babel-loader/lib/index.js","mtime":1661273171333},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/cache-loader/dist/cjs.js","mtime":1661273170805},{"path":"/Users/thossaporn/Downloads/game/admin-web/node_modules/vue-loader/lib/index.js","mtime":1661273161751}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZW1wbG95ZWVTZXJ2aWNlIGZyb20gIkAvc2VydmljZXMvZW1wbG95ZWVTZXJ2aWNlIjsNCmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsNCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL1VzZXJTZXJ2aWNlIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB5ZXN0ZXJkYXRlOiAiIiwNCiAgICAgIHllc3RlcnRpbWU6ICIiLA0KICAgICAgdG9kYXRlOiAiIiwNCiAgICAgIHRvdGltZTogIiIsDQogICAgICB1c2VybmFtZTogIiIsDQp1c2VybmFtZXV1aWQ6JycsDQogICAgICBlbXBsb3llZXRhYmxlOiBbXSwNCg0KICAgICAgZm9ybWVkaXQ6IHsNCiAgICAgICAgdXVpZDogIiIsDQogICAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgICAgcGFzc3dvcmQ6ICIiLA0KICAgICAgICByb2xlOiAiIiwNCiAgICAgICAgaW5mb19uYW1lOiAiIiwNCiAgICAgICAgcHJlZml4OiAiIiwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICAgICAgdGhpcy5jaGVja0F1dGgoKTsNCg0KICAgIHRoaXMubW9tZW50KCk7DQoNCiAgICB0aGlzLnllc3RlcmRhdGUgPSBtb21lbnQoKQ0KICAgICAgLmxvY2FsZSgidGgiKQ0KICAgICAgLnN1YnRyYWN0KDEsICJkYXlzIikNCiAgICAgIC5mb3JtYXQoIllZWVktTU0tREQiKTsNCiAgICB0aGlzLnllc3RlcnRpbWUgPSBtb21lbnQoKQ0KICAgICAgLmxvY2FsZSgidGgiKQ0KICAgICAgLnN1YnRyYWN0KDEsICJkYXlzIikNCiAgICAgIC5mb3JtYXQoIjExOjAwOjAwIik7DQogICAgdGhpcy50b2RhdGUgPSBtb21lbnQoKS5sb2NhbGUoInRoIikuZm9ybWF0KCJZWVlZLU1NLUREIik7DQogICAgdGhpcy50b3RpbWUgPSBtb21lbnQoKS5sb2NhbGUoInRoIikuZm9ybWF0KCIxMTowMDowMCIpOw0KICAgIHRoaXMuZ2V0QWxsRW1wbG95ZWUoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGNoZWNrQXV0aCgpew0KICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFByb2ZpbGUoKS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsNCiAgICAgICAgaWYoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEgfHwgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA1MDApew0KICAgICAgY29uc3QgcmVtb3ZlVG9rZW4gPSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgiYWNjZXNzX3Rva2VuIik7DQogICAgICAgIGlmIChyZW1vdmVUb2tlbiA9PSBudWxsKSB7DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsNCiAgICAgIH0NCiAgICAgIH0NCiAgICAgIH0pOw0KICAgICAgcmVzLmxvZ291dA0KICAgIH0sDQoNCiAgICBhc3luYyBnZXRBbGxFbXBsb3llZSgpIHsNCiAgICAgICB0aGlzLmVtcGxveWVldGFibGU9IiI7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBlbXBsb3llZVNlcnZpY2UuZ2V0QWxsTGlzdCgpOw0KICAgICAgdGhpcy5lbXBsb3llZXRhYmxlID0gcmVzLmRhdGE7DQogICAgfSwNCiAgICBhc3luYyBnZXRFbXBsb3llZUJ5VVVJRCh1dWlkKSB7DQogICAgICANCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRFZGl0TGlzdCh1dWlkKTsNCiAgICAgIHRoaXMuZm9ybWVkaXQudXVpZCA9IHJlcy5kYXRhLnV1aWQ7DQogICAgICB0aGlzLmZvcm1lZGl0LnVzZXJuYW1lID0gcmVzLmRhdGEudXNlcm5hbWU7DQogICAgICB0aGlzLmZvcm1lZGl0LnBhc3N3b3JkID0gcmVzLmRhdGEucGFzc3dvcmQ7DQogICAgICB0aGlzLmZvcm1lZGl0LnJvbGUgPSByZXMuZGF0YS5yb2xlOw0KICAgICAgdGhpcy5mb3JtZWRpdC5pbmZvX25hbWUgPSByZXMuZGF0YS5pbmZvX25hbWU7DQogICAgICB0aGlzLmZvcm1lZGl0LnByZWZpeCA9IHJlcy5kYXRhLnByZWZpeDsNCiAgICAgIHRoaXMudXNlcm5hbWV1dWlkID1yZXMuZGF0YS51c2VybmFtZQ0KICAgIH0sDQogICAgYXN5bmMgcG9zdEVtcGxveWVlQnlVVUlEKCkgew0KDQogICAgICB0aGlzLnJlcyA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5wb3N0RWRpdExpc3QodGhpcy5mb3JtZWRpdCkNCiAgICAgIC5jYXRjaCgoKSA9PiB7DQovLyB0aGlzLnBvc3QucmVzDQogICAgICB9KTsNCiAgICAgIHRoaXMuZ2V0QWxsRW1wbG95ZWUoKTsNCiAgICAgICAgICB3aW5kb3cuJCgiI2VkaXRldXNlciIpLm1vZGFsKCJoaWRlIik7DQoNCg0KICAgIH0sDQogICAgYXN5bmMgZGVsZXRlRW1wbG95ZWVCeVVVSUQodXVpZCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmRlbGV0ZUxpc3QodXVpZCk7DQogICAgICBjb25zb2xlLmxvZyhyZXMuZW1wbG95ZWVTZXJ2aWNlKTsNCiAgICAgIHRoaXMuZ2V0QWxsRW1wbG95ZWUoKTsNCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"employee.vue","sourceRoot":"src/components/pages/employee","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-inner\">\r\n      <div class=\"page-header\">\r\n        <br />\r\n        <h4 class=\"page-title\"><i class=\"fas fa-user-tie\"></i> พนักงาน</h4>\r\n        <ul class=\"breadcrumbs\"></ul>\r\n      </div>\r\n      <div class=\"page-body\">\r\n       \r\n        <div class=\"col-md-12\">\r\n          <div class=\"card\">\r\n            <div class=\"card-body\">\r\n              <table\r\n                id=\"basic-datatables\"\r\n                class=\"display table table-striped table-hover\"\r\n              >\r\n                <thead style=\"text-align: center\">\r\n                  <tr>\r\n                    <th>ชื่อ</th>\r\n                    <th>ชื่อผู้ใช้</th>\r\n                    <th>ตำแหน่ง</th>\r\n                    <th>Prefix</th>\r\n                    <th>ตัวเลือก</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody style=\"text-align: center\">\r\n                  <tr v-for=\"data in employeetable\" v-bind:key=\"data.uuid\">\r\n                    <td>{{ data.info_name }}</td>\r\n                    <td>{{ data.username }}</td>\r\n                    <td>{{ data.role }}</td>\r\n                    <td>{{ data.prefix }}</td>\r\n\r\n                    <td>\r\n                     <button\r\n                          type=\"button\"\r\n                          class=\"btn btn-warning btn-sm mr-1 text-white\"\r\n                          data-toggle=\"modal\"\r\n                          data-target=\"#editeuser\"\r\n                          v-on:click.prevent=\"getEmployeeByUUID(data.uuid)\"\r\n                        >\r\n                          <i class=\"fa fa-pencil-alt\" aria-hidden=\"true\"\r\n                            >แก้ไข</i\r\n                          >\r\n                        </button>\r\n                       <button\r\n                        type=\"button\"\r\n                        class=\"btn btn-danger btn-sm\"\r\n                        v-on:click.prevent=\"deleteEmployeeByUUID(data.uuid)\"\r\n                      >\r\n                        ลบ\r\n                      </button>\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n                  <tbody>\r\n                  <tr v-if=\"employeetable.length == '0'\">\r\n                    <td colspan=\"5\" class=\"text-center text-danger\">\r\n                      <i class=\"fas fa-times\"></i>\r\n                      ไม่มีข้อมูล !\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n        <div\r\n              class=\"modal fade\"\r\n              id=\"editeuser\"\r\n              tabindex=\"-1\"\r\n              role=\"dialog\"\r\n              aria-labelledby=\"modelTitleId\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <div class=\"modal-dialog \" role=\"document\">\r\n                <div class=\"modal-content\">\r\n                  <div class=\"modal-header\">\r\n                    <h5 class=\"modal-title\">แก้ไขข้อมูลของ : {{usernameuuid}} </h5>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"close\"\r\n                      data-dismiss=\"modal\"\r\n                      aria-label=\"Close\"\r\n                    >\r\n                      <span aria-hidden=\"true\">&times;</span>\r\n                    </button>\r\n                  </div>\r\n                  <form  v-on:submit.prevent=\"postEmployeeByUUID()\">\r\n                    <div class=\"modal-body\">\r\n                      <div class=\"col-md-12\">\r\n                        <div class=\"row\">\r\n                          <div class=\"col-md-6\">\r\n                            <input type=\"text\" hidden v-model=\"formedit.uuid\" />\r\n                         \r\n\r\n                            <div class=\"form-group row\">\r\n                              <label\r\n                                for=\"tel\"\r\n                                class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\"\r\n                              >\r\n                                ชื่อผู้ใช้ :\r\n                                <span class=\"required-label\">*</span>\r\n                              </label>\r\n                              <input\r\n                              disabled\r\n                                class=\"form-control\"\r\n                                type=\"text\"\r\n                                name=\"tel\"\r\n                                id=\"tel\"\r\n                                aria-describedby=\"helpId\"\r\n                                placeholder=\"tel\"\r\n                                v-model=\"formedit.username\"\r\n                                required\r\n                              />\r\n                            </div>\r\n\r\n                            <div class=\"form-group row\">\r\n                              <label\r\n                                for=\"bonus\"\r\n                                class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\"\r\n                              >\r\n                                ตำแหน่ง:\r\n                                <span class=\"required-label\">*</span>\r\n                              </label>\r\n                              <select\r\n                                class=\"form-control\"\r\n                                name=\"bonus\"\r\n                                id=\"bonus\"\r\n                                v-model=\"formedit.role\"\r\n                                required\r\n                              >\r\n                                <option selected disabled value>\r\n                                  เลือก role\r\n                                </option>\r\n\r\n                                <option value=\"Admin\">Admin</option>\r\n                                <option value=\"Staff\">Staff</option>  \r\n                                                             </select>\r\n                            </div>\r\n\r\n                             <div class=\"form-group row\">\r\n                              <label\r\n                                for=\"tel\"\r\n                                class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\"\r\n                              >\r\n                                prefix :\r\n                                <span class=\"required-label\">*</span>\r\n                              </label>\r\n                              <input\r\n                                class=\"form-control\"\r\n                                type=\"text\"\r\n                                name=\"tel\"\r\n                                id=\"tel\"\r\n                                aria-describedby=\"helpId\"\r\n                                placeholder=\"tel\"\r\n                                v-model=\"formedit.prefix\"\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div class=\"col-md-6\">\r\n                          \r\n\r\n                            <div class=\"form-group row\">\r\n                              <label\r\n                                for=\"know_us\"\r\n                                class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\"\r\n                              >\r\n                                รหัสผ่าน :\r\n                                <span class=\"required-label\">*</span>\r\n                              </label>\r\n                              <input\r\n                                class=\"form-control\"\r\n                                type=\"password\"\r\n                                name=\"know_us\"\r\n                                id=\"know_us\"\r\n                                aria-describedby=\"helpId\"\r\n                                placeholder=\"know_us\"\r\n                                v-model=\"formedit.password\"\r\n                                required\r\n                              />\r\n                            </div>\r\n\r\n                           \r\n                            <div class=\"form-group row\">\r\n                              <label\r\n                                for=\"bank_number\"\r\n                                class=\"col-lg-3 col-md-3 col-sm-4 mt-sm-2 text-right\"\r\n                              >\r\n                                ชื่อ :\r\n                                <span class=\"required-label\">*</span>\r\n                              </label>\r\n                              <input\r\n                                class=\"form-control\"\r\n                                type=\"text\"\r\n                                name=\"bank_number\"\r\n                                id=\"bank_number\"\r\n                                aria-describedby=\"helpId\"\r\n                                placeholder=\"bank_number\"\r\n                                v-model=\"formedit.info_name\"\r\n                                required\r\n                              />\r\n                            </div>\r\n                            <div\r\n                              class=\"form-group d-flex justify-content-right\"\r\n                            >\r\n                            <button\r\n                                class=\"btn btn-primary\r\n                                \"\r\n                               \r\n                              >\r\n                             \r\n                            \r\n                               <i class=\"fa fa-check\" aria-hidden=\"true\"></i>\r\n                                ยืนยัน\r\n                              </button>\r\n                             \r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </form>\r\n                </div>\r\n              </div>\r\n            </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport employeeService from \"@/services/employeeService\";\r\nimport moment from \"moment\";\r\nimport UserService from \"@/services/UserService\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      yesterdate: \"\",\r\n      yestertime: \"\",\r\n      todate: \"\",\r\n      totime: \"\",\r\n      username: \"\",\r\nusernameuuid:'',\r\n      employeetable: [],\r\n\r\n      formedit: {\r\n        uuid: \"\",\r\n        username: \"\",\r\n        password: \"\",\r\n        role: \"\",\r\n        info_name: \"\",\r\n        prefix: \"\",\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n        this.checkAuth();\r\n\r\n    this.moment();\r\n\r\n    this.yesterdate = moment()\r\n      .locale(\"th\")\r\n      .subtract(1, \"days\")\r\n      .format(\"YYYY-MM-DD\");\r\n    this.yestertime = moment()\r\n      .locale(\"th\")\r\n      .subtract(1, \"days\")\r\n      .format(\"11:00:00\");\r\n    this.todate = moment().locale(\"th\").format(\"YYYY-MM-DD\");\r\n    this.totime = moment().locale(\"th\").format(\"11:00:00\");\r\n    this.getAllEmployee();\r\n  },\r\n  methods: {\r\n    async checkAuth(){\r\n       const res = await UserService.getProfile().catch(function (error) {\r\n        if(error.response.status === 401 || error.response.status === 500){\r\n      const removeToken = localStorage.removeItem(\"access_token\");\r\n        if (removeToken == null) {\r\n        this.$router.push(\"/login\");\r\n      }\r\n      }\r\n      });\r\n      res.logout\r\n    },\r\n\r\n    async getAllEmployee() {\r\n       this.employeetable=\"\";\r\n      const res = await employeeService.getAllList();\r\n      this.employeetable = res.data;\r\n    },\r\n    async getEmployeeByUUID(uuid) {\r\n      \r\n      const res = await employeeService.getEditList(uuid);\r\n      this.formedit.uuid = res.data.uuid;\r\n      this.formedit.username = res.data.username;\r\n      this.formedit.password = res.data.password;\r\n      this.formedit.role = res.data.role;\r\n      this.formedit.info_name = res.data.info_name;\r\n      this.formedit.prefix = res.data.prefix;\r\n      this.usernameuuid =res.data.username\r\n    },\r\n    async postEmployeeByUUID() {\r\n\r\n      this.res = await employeeService.postEditList(this.formedit)\r\n      .catch(() => {\r\n// this.post.res\r\n      });\r\n      this.getAllEmployee();\r\n          window.$(\"#editeuser\").modal(\"hide\");\r\n\r\n\r\n    },\r\n    async deleteEmployeeByUUID(uuid) {\r\n      const res = await employeeService.deleteList(uuid);\r\n      console.log(res.employeeService);\r\n      this.getAllEmployee();\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}