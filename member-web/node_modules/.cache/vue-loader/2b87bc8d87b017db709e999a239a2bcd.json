{"remainingRequest":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\updatepassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\updatepassword.vue","mtime":1629947196000},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1656322787546},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1656322788972}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQovLyBpbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RoIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsNCmltcG9ydCBhdXRoU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIjsNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQgeyBiYXNlVVJMIH0gZnJvbSAiLi4vLi4vc2VydmljZXMvYXBpIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGVsOiAiIiwNCiAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIGNmcGFzc3dvcmQ6ICIiLA0KICAgICAgbXNnOiAiIiwNCiAgICAgIHRleHQ6ICIiLA0KICAgICAgbG9nbzogIiIsDQogICAgICBlbWFpbEJsdXJlZDogZmFsc2UsDQogICAgICB2YWxpZDogZmFsc2UsDQogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLA0KICAgICAgDQogICAgfTsNCiAgfSwNCg0KICAvLyB2YWxpZGF0aW9uczogew0KICAvLyAgIHRlbDogew0KICAvLyAgICAgcmVxdWlyZWQsDQogIC8vICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCgxMCksDQogIC8vICAgfSwNCiAgLy8gICBwYXNzd29yZDogew0KICAvLyAgICAgcmVxdWlyZWQsDQogIC8vICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCg4KSwNCiAgLy8gICB9LA0KICAvLyB9LA0KICBtb3VudGVkKCkgew0KICAgIC8v4LiU4Li24LiH4Lig4Liy4Lie4LmC4Lil4LmC4LiB4LmJDQogICAgYXhpb3Moew0KICAgICAgbWV0aG9kOiAiZ2V0IiwNCiAgICAgIHVybDogYmFzZVVSTCArICIvcGhvdG8vcHJlZml4IiwNCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYWNjZXNzX3Rva2VuIiksDQogICAgICB9LA0KICAgIH0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5sb2dvID0gcmVzcG9uc2UuZGF0YS5kYXRhLnByZWZpeFswXS5sb2dvOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICByb3V0ZXJMb2dpbigpew0KICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvbG9naW4iKTsNCiAgICB9LA0KDQogICAgYXN5bmMgY2Z1cGRhdGVwYXNzd29yZCgpIHsNCiAgICAgIHRyeSB7DQoNCg0KICAgICAgICAgIGlmKHRoaXMucGFzc3dvcmQgIT09IHRoaXMuY2ZwYXNzd29yZCl7DQogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoYCDguKPguKvguLHguKrguJzguYjguLLguJnguYTguKHguYjguJXguKPguIfguIHguLHguJkgYCwgew0KICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLA0KICAgICAgICAgICAgdGltZW91dDogMTUwMCwNCiAgICAgICAgICB9KTsNCiAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgbGV0IHB3YyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInB3YyIpOw0KICAgICAgICAgICAgICBjb25zdCBjb25maXJtcGFzc3dvcmQgPSB7DQogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsDQogICAgICAgICAgICAgICAgdXVpZDogcHdjDQogICAgDQogICAgICAgICAgICAgfTsNCiAgICAgICAgICAgICAgIGF3YWl0IGF1dGhTZXJ2aWNlLnVwZGF0ZXB3KGNvbmZpcm1wYXNzd29yZCk7DQogICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoIuC4quC4s+C5gOC4o+C5h+C4iCIsIHsNCiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLA0KICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxNTAwLA0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5yZW1vdmVJdGVtKCJwd2MiKQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbiIpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgDQogICAgICAgIA0KICAgICAgIA0KICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlLCB7DQogICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLA0KICAgICAgICAgIHRpbWVvdXQ6IDE1MDAsDQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["updatepassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"updatepassword.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-sm-9 col-md-7 col-lg-5 mx-auto\">\r\n        <div class=\"text-center mb-4\">\r\n          <img v-bind:src=\"logo\" class=\"rounded\" alt=\"...\" width=\"80%\" />\r\n        </div>\r\n        <!-- <div class=\"text-center\">\r\n          <div class=\"logo\">\r\n            <img v-bind:src=\"logo\" width=\"80%\" />\r\n          </div>\r\n        </div> -->\r\n        <div class=\"card-login card-signin my-5\">\r\n          <div class=\"card-body mb-3 mt-3\">\r\n              <h4 class=\"text-center\">ตั้งรหัสผ่านใหม่ของคุณ</h4>\r\n            <!-- <h5 class=\"card-title text-center\">Payment Auto </h5> -->\r\n            <form v-on:submit.prevent=\"cfupdatepassword\">\r\n              <div class=\"form-label-group\">\r\n                <label for=\"inputTel\">รหัสผ่าน</label>\r\n                <span class=\"mb-3\" style=\"color: red\"> {{ text }}</span>\r\n              <input\r\n                  v-model=\"password\"\r\n                  type=\"password\"\r\n                  id=\"inputPassword\"\r\n                  class=\"form-control rounded-pill\"\r\n                  placeholder=\"กรุณากรอกรหัสผ่าน\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ')\"\r\n                />\r\n              </div>\r\n              <div class=\"form-label-group mt-2\">\r\n                <label for=\"inputPassword\">ยืนยันรหัสผ่าน</label>\r\n                <input\r\n                  v-model=\"cfpassword\"\r\n                  type=\"password\"\r\n                  id=\"inputPassword\"\r\n                  class=\"form-control rounded-pill\"\r\n                  placeholder=\"กรุณากรอกรหัสผ่าน\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ')\"\r\n                />\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                value=\"Login\"\r\n                class=\"btn btn-blue btn-block mt-4 rounded-pill text-white\"\r\n                :disabled=\"!cfpassword || !password\"\r\n              >\r\n               ยืนยน\r\n              </button>\r\n    \r\n              <hr class=\"mt-5\" />\r\n              <button @click=\"routerLogin\" class=\"btn btn-blue btn-block rounded-pill text-white\">\r\n                  <i class=\"fas fa-user-plus fa-lg mr-2\"></i> เข้าสู่ระบบ\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { required, minLength } from \"vuelidate/lib/validators\";\r\nimport authService from \"@/services/authService.js\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from \"../../services/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tel: \"\",\r\n      password: \"\",\r\n      cfpassword: \"\",\r\n      msg: \"\",\r\n      text: \"\",\r\n      logo: \"\",\r\n      emailBlured: false,\r\n      valid: false,\r\n      submitted: false,\r\n      \r\n    };\r\n  },\r\n\r\n  // validations: {\r\n  //   tel: {\r\n  //     required,\r\n  //     minLength: minLength(10),\r\n  //   },\r\n  //   password: {\r\n  //     required,\r\n  //     minLength: minLength(8),\r\n  //   },\r\n  // },\r\n  mounted() {\r\n    //ดึงภาพโลโก้\r\n    axios({\r\n      method: \"get\",\r\n      url: baseURL + \"/photo/prefix\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access_token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        this.logo = response.data.data.prefix[0].logo;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  methods: {\r\n    routerLogin(){\r\n       this.$router.push(\"/login\");\r\n    },\r\n\r\n    async cfupdatepassword() {\r\n      try {\r\n\r\n\r\n          if(this.password !== this.cfpassword){\r\n                this.$toast.error(` รหัสผ่านไม่ตรงกัน `, {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n          });\r\n          }else{\r\n              let pwc = sessionStorage.getItem(\"pwc\");\r\n              const confirmpassword = {\r\n                password: this.password,\r\n                uuid: pwc\r\n    \r\n             };\r\n               await authService.updatepw(confirmpassword);\r\n              \r\n                this.$toast.success(\"สำเร็จ\", {\r\n                    position: \"top-right\",\r\n                    timeout: 1500,\r\n                });\r\n            \r\n            sessionStorage.removeItem(\"pwc\")\r\n            this.$router.push(\"/login\");\r\n            }\r\n\r\n          \r\n        \r\n       \r\n      } catch (error) {\r\n        this.$toast.error(error.response.data.error.message, {\r\n          position: \"top-right\",\r\n          timeout: 1500,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}