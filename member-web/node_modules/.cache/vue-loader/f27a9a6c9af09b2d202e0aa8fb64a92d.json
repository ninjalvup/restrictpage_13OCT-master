{"remainingRequest":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\forgotpassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\forgotpassword.vue","mtime":1629947196000},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1656322787546},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1656322788972}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyByZXF1aXJlZCwgbWluTGVuZ3RoIH0gZnJvbSAidnVlbGlkYXRlL2xpYi92YWxpZGF0b3JzIjsNCmltcG9ydCBhdXRoU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIjsNCmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7DQppbXBvcnQgeyBiYXNlVVJMIH0gZnJvbSAiLi4vLi4vc2VydmljZXMvYXBpIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZpcnN0X25hbWU6ICIiLA0KICAgICAgbGFzdF9uYW1lOiAiIiwNCiAgICAgIGJhbmtfbnVtYmVyOiAiIiwNCiAgICAgIGJhbmtfbmFtZTogIiIsDQogICAgICB0ZWw6ICIiLA0KICAgICAgbGluZV9pZDogIiIsDQogICAgICBrbm93X3VzOiAiIiwNCiAgICAgIGJvbnVzOiAiIiwNCiAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgIHByZWZpeDogIiIsDQogICAgICBzdGVwOiAxLA0KICAgICAgdG90YWxzdGVwczogMywNCiAgICAgIGVycm9yczogW10sDQogICAgICBsb2dvOiAiIiwNCiAgICAgIGNhcHRjaGE6ICIiLA0KICAgICAgZm9ybTogew0KICAgICAgICByb2JvdDogZmFsc2UsDQogICAgICB9LA0KICAgIH07DQogIH0sDQogIHZhbGlkYXRpb25zOiB7DQogICAgdGVsOiB7DQogICAgICByZXF1aXJlZCwNCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDEwKSwNCiAgICB9LA0KICAgIGJhbmtfbnVtYmVyOiB7DQogICAgICByZXF1aXJlZCwNCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDEwKSwNCiAgICB9LA0KICAgIHBhc3N3b3JkOiB7DQogICAgICByZXF1aXJlZCwNCiAgICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDgpLA0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgYXhpb3Moew0KICAgICAgbWV0aG9kOiAiZ2V0IiwNCiAgICAgIHVybDogYmFzZVVSTCArICIvcGhvdG8vcHJlZml4IiwNCiAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uIiwNCiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgiYWNjZXNzX3Rva2VuIiksDQogICAgICB9LA0KICAgIH0pDQogICAgICAudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5sb2dvID0gcmVzcG9uc2UuZGF0YS5kYXRhLnByZWZpeFswXS5sb2dvOw0KICAgICAgfSkNCiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSk7DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgbGV0IHVyaSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCI/Iik7DQogICAgaWYgKHVyaS5sZW5ndGggPT0gMikgew0KICAgICAgbGV0IHZhcnMgPSB1cmlbMV0uc3BsaXQoIiYiKTsNCiAgICAgIGxldCBnZXRWYXJzID0ge307DQogICAgICBsZXQgdG1wID0gIiI7DQogICAgICB0aGlzLnByZWZpeCA9IGdldFZhcnM7DQogICAgICB2YXJzLmZvckVhY2goZnVuY3Rpb24gKHYpIHsNCiAgICAgICAgdG1wID0gdi5zcGxpdCgiPSIpOw0KICAgICAgICBpZiAodG1wLmxlbmd0aCA9PSAyKSBnZXRWYXJzW3RtcFswXV0gPSB0bXBbMV07DQogICAgICB9KTsNCiAgICAgIC8vIGRvDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy9SZWdFWA0KICAgIG9uTnVtYmVyKCkgew0KICAgICAgdGhpcy50ZWwgPSB0aGlzLnRlbC5yZXBsYWNlKC9bQS1aYS164LiBLeC5m10vZywgIiIpOw0KICAgICAgdGhpcy5iYW5rX251bWJlciA9IHRoaXMuYmFua19udW1iZXIucmVwbGFjZSgvW0EtWmEteuC4gS3guZtdL2csICIiKTsNCiAgICB9LA0KICAgIG9ubHlUZXh0KCkgew0KICAgICAgdGhpcy5maXJzdF9uYW1lID0gdGhpcy5maXJzdF9uYW1lLnJlcGxhY2UoL1tBLVowLTlhLXpdL2csICIiKTsNCiAgICAgIHRoaXMubGFzdF9uYW1lID0gdGhpcy5sYXN0X25hbWUucmVwbGFjZSgvW0EtWmEtejAtOV0vZywgIiIpOw0KICAgIH0sDQogICAgb25WZXJpZnk6IGZ1bmN0aW9uIChyZXNwb25zZSkgew0KICAgICAgaWYgKHJlc3BvbnNlKSB0aGlzLmZvcm0ucm9ib3QgPSB0cnVlOw0KICAgIH0sDQogICAgLy/guKrguKHguLHguITguKPguYDguYDguJrguJogc3RlcA0KICAgIG5leHRzdGVwcygpIHsNCiAgICAgIGlmICh0aGlzLnN0ZXAgPT0gMSkgew0KICAgICAgICBpZiAoIXRoaXMudGVsKSB7DQogICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAodGhpcy5zdGVwID09IDIpIHsNCiAgICAgICAgaWYgKCF0aGlzLmJhbmtfbmFtZSkgew0KICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5zdGVwKys7DQogICAgfSwNCiAgICBiYWNrc3RlcHMoKSB7DQogICAgICB0aGlzLnN0ZXAtLTsNCiAgICB9LA0KICAgIGFzeW5jIGZvcmdvdHBhc3N3b3JkKCl7DQogICAgICAgdHJ5IHsNCiAgICAgICAgICAgIGNvbnN0IGZvcmdvdEZvcm0gPSB7DQogICAgICAgICAgICAgICAgZmlyc3RfbmFtZTogdGhpcy5maXJzdF9uYW1lLA0KICAgICAgICAgICAgICAgIGxhc3RfbmFtZTogdGhpcy5sYXN0X25hbWUsDQogICAgICAgICAgICAgICAgYmFua19udW1iZXI6IHRoaXMuYmFua19udW1iZXIsDQogICAgICAgICAgICAgICAgdGVsOiB0aGlzLnRlbCwNCiAgICAgICAgICAgICAgIA0KICAgICAgICB9Ow0KICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhdXRoU2VydmljZS5mb3Jnb3RQYXNzd29yZChmb3Jnb3RGb3JtKTsNCiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInB3YyIsIHJlc3BvbnNlLnV1aWQpOw0KICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2VzcyhgJHtyZXNwb25zZS5kYXRhfSDguYDguILguYnguLLguKvguJnguYnguLIg4LmB4LiB4LmJ4LmE4LiCIHBhc3N3b3JkIGAsIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wLXJpZ2h0IiwNCiAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAsDQogICAgICAgICAgfSk7DQogICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvdXBkYXRlcGFzc3dvcmQiKTsNCiAgICAgICAgICAgDQogICAgICAgfSBjYXRjaCAoZXJyb3IpIHsNCiAgICAgDQogICAgICAgICAgICB0aGlzLiR0b2FzdC5lcnJvcihlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yLm1lc3NhZ2UsIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiAidG9wLXJpZ2h0IiwNCiAgICAgICAgICAgIHRpbWVvdXQ6IDI1MDAsDQogICAgICAgICAgfSk7DQogICAgICAgfQ0KICAgIH0sDQogICAgDQogIH0sDQogIC8vLS0tLS0tLT4NCn07DQo="},{"version":3,"sources":["forgotpassword.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"forgotpassword.vue","sourceRoot":"src/components/pages","sourcesContent":["<template>\r\n  <div id=\"register\">\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-sm-9 col-md-7 col-lg-5 mx-auto\">\r\n           <div class=\"text-center mb-4\">\r\n          <img v-bind:src=\"logo\" class=\"rounded\" alt=\"...\" width=\"80%\" />\r\n        </div>\r\n        <div class=\"card-login mt-5\">\r\n          <div class=\"card-body p-5\">\r\n            <form id=\"regiration_form\" class=\"mb-2\">\r\n              <section v-if=\"step == 1\">\r\n                <h6 class=\"mb-3 text-center\">ลืมรหัสผ่าน? 1/2</h6>\r\n                <br />\r\n                <span></span>\r\n                <div class=\"form-group\">\r\n                  <label for=\"tel\">หมายเลขโทรศัพท์</label>\r\n                  <input\r\n                    v-model=\"tel\"\r\n                    type=\"tel\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"กรุณากรอกเบอร์มือถือ\"\r\n                    minlength=\"8\"\r\n                    maxlength=\"10\"\r\n                    oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ 10 หลัก')\"\r\n                    @keyup=\"onNumber\"\r\n                  />\r\n                  <span\r\n                    class=\"error\"\r\n                    style=\"color: red\"\r\n                    v-if=\"!$v.tel.minLength\"\r\n                    >กรุณากรอกให้ครบทั้ง\r\n                    {{ $v.tel.$params.minLength.min }} หลัก.</span\r\n                  >\r\n                </div>\r\n                <button\r\n                  @click.prevent=\"nextsteps\"\r\n                  type=\"button\"\r\n                  name=\"password\"\r\n                  class=\"btn btn btn-gradient w-100\"\r\n                  value=\"ถัดไป\"\r\n                  :disabled=\"!$v.tel.minLength\"\r\n                >\r\n                  ถัดไป\r\n                  <i class=\"fas fa-arrow-circle-right\"></i>\r\n                </button>\r\n                <br />\r\n                <hr />\r\n                <br />\r\n                <br />\r\n                <p class=\"text-center\">\r\n                  มีบัญชีผู้ใช้แล้ว\r\n                  <router-link to=\"/\">\r\n                    <i class=\"fas fa-sign-in-alt\"></i> เข้าสู่ระบบ\r\n                  </router-link>\r\n                </p>\r\n                <br />\r\n              </section>\r\n              <section v-if=\"step == 2\">\r\n                <h6 class=\"mb-3 text-center\">ลืมรหัสผ่าน? 2/2</h6>\r\n           \r\n                <div class=\"form-group\">\r\n                  <label for=\"account_number\">หมายเลขบัญชี</label>\r\n                  <input\r\n                    v-model=\"bank_number\"\r\n                    type=\"tel\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"กรุณากรอกหมายเลขบัญชี\"\r\n                    minlength=\"10\"\r\n                    maxlength=\"12\"\r\n                    oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ 10 หลัก')\"\r\n                    @keyup=\"onNumber\"\r\n                  />\r\n                  <span\r\n                    class=\"error\"\r\n                    style=\"color: red\"\r\n                    v-if=\"!$v.bank_number.minLength\"\r\n                    >กรุณากรอกให้ครบทั้ง\r\n                    {{ $v.bank_number.$params.minLength.min }}-12 หลัก.</span\r\n                  >\r\n                </div>\r\n                <div class=\"form-group\">\r\n                  <label for=\"fname\">ชื่อจริง*กรอกภาษาไทยเท่านั้น</label>\r\n                  <input\r\n                    v-model=\"first_name\"\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    name=\"first_name\"\r\n                    id=\"first_name\"\r\n                    placeholder=\"กรุณาใช้ชื่อจริงที่ตรงกับบัญชีเท่านั้น\"\r\n                    @keyup=\"onlyText\"\r\n                  />\r\n                </div>\r\n                  <div class=\"form-group\">\r\n                  <label for=\"fname\">นามสกุล*กรอกภาษาไทยเท่านั้น</label>\r\n                  <input\r\n                    v-model=\"last_name\"\r\n                    type=\"text\"\r\n                    class=\"form-control\"\r\n                    name=\"last_name\"\r\n                    id=\"last_name\"\r\n                    placeholder=\"กรอกนามสกุล\"\r\n                    @keyup=\"onlyText\"\r\n                  />\r\n                </div>\r\n      \r\n\r\n                 <button\r\n                  @click.prevent=\"backsteps\"\r\n                  type=\"button\"\r\n                  name=\"previous\"\r\n                  class=\"btn btn btn-gradient w-100 mr-1\"\r\n                >\r\n                  <i class=\"fas fa-arrow-circle-left\"></i> กลับ\r\n                </button>\r\n\r\n                <button\r\n                  @click.prevent=\"forgotpassword\"\r\n                  name=\"submit\"\r\n                  value=\"forgotpassword\"\r\n                  class=\"btn btn btn-gradient-success w-100 mt-2 mb-4 text-white\"\r\n                 \r\n                >\r\n                  <i class=\"fas fa-check-circle\"></i> ส่ง\r\n                </button>\r\n              </section>\r\n         \r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { required, minLength } from \"vuelidate/lib/validators\";\r\nimport authService from \"@/services/authService.js\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from \"../../services/api\";\r\n\r\nexport default {\r\n  components: {\r\n \r\n  },\r\n  data() {\r\n    return {\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      bank_number: \"\",\r\n      bank_name: \"\",\r\n      tel: \"\",\r\n      line_id: \"\",\r\n      know_us: \"\",\r\n      bonus: \"\",\r\n      password: \"\",\r\n      prefix: \"\",\r\n      step: 1,\r\n      totalsteps: 3,\r\n      errors: [],\r\n      logo: \"\",\r\n      captcha: \"\",\r\n      form: {\r\n        robot: false,\r\n      },\r\n    };\r\n  },\r\n  validations: {\r\n    tel: {\r\n      required,\r\n      minLength: minLength(10),\r\n    },\r\n    bank_number: {\r\n      required,\r\n      minLength: minLength(10),\r\n    },\r\n    password: {\r\n      required,\r\n      minLength: minLength(8),\r\n    },\r\n  },\r\n  mounted() {\r\n    axios({\r\n      method: \"get\",\r\n      url: baseURL + \"/photo/prefix\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access_token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        this.logo = response.data.data.prefix[0].logo;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  created() {\r\n    let uri = window.location.href.split(\"?\");\r\n    if (uri.length == 2) {\r\n      let vars = uri[1].split(\"&\");\r\n      let getVars = {};\r\n      let tmp = \"\";\r\n      this.prefix = getVars;\r\n      vars.forEach(function (v) {\r\n        tmp = v.split(\"=\");\r\n        if (tmp.length == 2) getVars[tmp[0]] = tmp[1];\r\n      });\r\n      // do\r\n    }\r\n  },\r\n  methods: {\r\n    //RegEX\r\n    onNumber() {\r\n      this.tel = this.tel.replace(/[A-Za-zก-๛]/g, \"\");\r\n      this.bank_number = this.bank_number.replace(/[A-Za-zก-๛]/g, \"\");\r\n    },\r\n    onlyText() {\r\n      this.first_name = this.first_name.replace(/[A-Z0-9a-z]/g, \"\");\r\n      this.last_name = this.last_name.replace(/[A-Za-z0-9]/g, \"\");\r\n    },\r\n    onVerify: function (response) {\r\n      if (response) this.form.robot = true;\r\n    },\r\n    //สมัครเเบบ step\r\n    nextsteps() {\r\n      if (this.step == 1) {\r\n        if (!this.tel) {\r\n          return false;\r\n        }\r\n      }\r\n      if (this.step == 2) {\r\n        if (!this.bank_name) {\r\n          return false;\r\n        }\r\n      }\r\n      this.step++;\r\n    },\r\n    backsteps() {\r\n      this.step--;\r\n    },\r\n    async forgotpassword(){\r\n       try {\r\n            const forgotForm = {\r\n                first_name: this.first_name,\r\n                last_name: this.last_name,\r\n                bank_number: this.bank_number,\r\n                tel: this.tel,\r\n               \r\n        };\r\n         const response = await authService.forgotPassword(forgotForm);\r\n            sessionStorage.setItem(\"pwc\", response.uuid);\r\n            this.$toast.success(`${response.data} เข้าหน้า แก้ไข password `, {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n          });\r\n           this.$router.push(\"/updatepassword\");\r\n           \r\n       } catch (error) {\r\n     \r\n            this.$toast.error(error.response.data.error.message, {\r\n            position: \"top-right\",\r\n            timeout: 2500,\r\n          });\r\n       }\r\n    },\r\n    \r\n  },\r\n  //------->\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-gradient {\r\n    background-image: linear-gradient(\r\n270deg\r\n,#01b3d7,#017fd7);\r\n    border-width: 0;\r\n    color: #fff!important;\r\n}\r\n.btn-gradient-success{\r\n     background-image: linear-gradient(\r\n270deg\r\n,#1e7e34,#28a745);\r\n    border-width: 0;\r\n    color: #fff!important;\r\n}\r\n</style>"]}]}