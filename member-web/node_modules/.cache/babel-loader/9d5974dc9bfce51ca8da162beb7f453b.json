{"remainingRequest":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js!/Users/thossaporn/Downloads/game/member-web/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/thossaporn/Downloads/game/member-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/thossaporn/Downloads/game/member-web/src/components/pages/updatepassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/thossaporn/Downloads/game/member-web/src/components/pages/updatepassword.vue","mtime":1629947196000},{"path":"/Users/thossaporn/Downloads/game/member-web/babel.config.js","mtime":1629947196000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/cache-loader/dist/cjs.js","mtime":1656322782000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js","mtime":1656322786000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/cache-loader/dist/cjs.js","mtime":1656322782000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/vue-loader/lib/index.js","mtime":1656322788000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IHsgcmVxdWlyZWQsIG1pbkxlbmd0aCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCBhdXRoU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgYmFzZVVSTCB9IGZyb20gIi4uLy4uL3NlcnZpY2VzL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGVsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBjZnBhc3N3b3JkOiAiIiwKICAgICAgbXNnOiAiIiwKICAgICAgdGV4dDogIiIsCiAgICAgIGxvZ286ICIiLAogICAgICBlbWFpbEJsdXJlZDogZmFsc2UsCiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgc3VibWl0dGVkOiBmYWxzZQogICAgfTsKICB9LAoKICAvLyB2YWxpZGF0aW9uczogewogIC8vICAgdGVsOiB7CiAgLy8gICAgIHJlcXVpcmVkLAogIC8vICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCgxMCksCiAgLy8gICB9LAogIC8vICAgcGFzc3dvcmQ6IHsKICAvLyAgICAgcmVxdWlyZWQsCiAgLy8gICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDgpLAogIC8vICAgfSwKICAvLyB9LAogIG1vdW50ZWQoKSB7CiAgICAvL+C4lOC4tuC4h+C4oOC4suC4nuC5guC4peC5guC4geC5iQogICAgYXhpb3MoewogICAgICBtZXRob2Q6ICJnZXQiLAogICAgICB1cmw6IGJhc2VVUkwgKyAiL3Bob3RvL3ByZWZpeCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFjY2Vzc190b2tlbiIpCiAgICAgIH0KICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICB0aGlzLmxvZ28gPSByZXNwb25zZS5kYXRhLmRhdGEucHJlZml4WzBdLmxvZ287CiAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHJvdXRlckxvZ2luKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICB9LAoKICAgIGFzeW5jIGNmdXBkYXRlcGFzc3dvcmQoKSB7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHRoaXMucGFzc3dvcmQgIT09IHRoaXMuY2ZwYXNzd29yZCkgewogICAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoYCDguKPguKvguLHguKrguJzguYjguLLguJnguYTguKHguYjguJXguKPguIfguIHguLHguJkgYCwgewogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgcHdjID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgicHdjIik7CiAgICAgICAgICBjb25zdCBjb25maXJtcGFzc3dvcmQgPSB7CiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgICAgICB1dWlkOiBwd2MKICAgICAgICAgIH07CiAgICAgICAgICBhd2FpdCBhdXRoU2VydmljZS51cGRhdGVwdyhjb25maXJtcGFzc3dvcmQpOwogICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcygi4Liq4Liz4LmA4Lij4LmH4LiIIiwgewogICAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICAgIHRpbWVvdXQ6IDE1MDAKICAgICAgICAgIH0pOwogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgicHdjIik7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJHRvYXN0LmVycm9yKGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IubWVzc2FnZSwgewogICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLAogICAgICAgICAgdGltZW91dDogMTUwMAogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkEA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,OADA;MAEAC,YAFA;MAGAC,cAHA;MAIAC,OAJA;MAKAC,QALA;MAMAC,QANA;MAOAC,kBAPA;MAQAC,YARA;MASAC;IATA;EAYA,CAdA;;EAgBA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACAC;IACA;IACAC;MACAC,aADA;MAEAC,8BAFA;MAGAC;QACA,kCADA;QAEAC;MAFA;IAHA,GAQAC,IARA,CAQAC;MACA;IACA,CAVA,EAWAC,KAXA,CAWAC;MACAC;IACA,CAbA;EAcA,CA1CA;;EA2CAC;IACAC;MACA;IACA,CAHA;;IAKA;MACA;QAGA;UACA;YACAC,qBADA;YAEAC;UAFA;QAIA,CALA,MAKA;UACA;UACA;YACAtB,uBADA;YAEAuB;UAFA;UAKA;UAEA;YACAF,qBADA;YAEAC;UAFA;UAKAE;UACA;QACA;MAKA,CA7BA,CA6BA;QACA;UACAH,qBADA;UAEAC;QAFA;MAIA;IACA;;EAzCA;AA3CA","names":["data","tel","password","cfpassword","msg","text","logo","emailBlured","valid","submitted","mounted","axios","method","url","headers","Authorization","then","response","catch","error","console","methods","routerLogin","position","timeout","uuid","sessionStorage"],"sourceRoot":"src/components/pages","sources":["updatepassword.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-sm-9 col-md-7 col-lg-5 mx-auto\">\r\n        <div class=\"text-center mb-4\">\r\n          <img v-bind:src=\"logo\" class=\"rounded\" alt=\"...\" width=\"80%\" />\r\n        </div>\r\n        <!-- <div class=\"text-center\">\r\n          <div class=\"logo\">\r\n            <img v-bind:src=\"logo\" width=\"80%\" />\r\n          </div>\r\n        </div> -->\r\n        <div class=\"card-login card-signin my-5\">\r\n          <div class=\"card-body mb-3 mt-3\">\r\n              <h4 class=\"text-center\">ตั้งรหัสผ่านใหม่ของคุณ</h4>\r\n            <!-- <h5 class=\"card-title text-center\">Payment Auto </h5> -->\r\n            <form v-on:submit.prevent=\"cfupdatepassword\">\r\n              <div class=\"form-label-group\">\r\n                <label for=\"inputTel\">รหัสผ่าน</label>\r\n                <span class=\"mb-3\" style=\"color: red\"> {{ text }}</span>\r\n              <input\r\n                  v-model=\"password\"\r\n                  type=\"password\"\r\n                  id=\"inputPassword\"\r\n                  class=\"form-control rounded-pill\"\r\n                  placeholder=\"กรุณากรอกรหัสผ่าน\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ')\"\r\n                />\r\n              </div>\r\n              <div class=\"form-label-group mt-2\">\r\n                <label for=\"inputPassword\">ยืนยันรหัสผ่าน</label>\r\n                <input\r\n                  v-model=\"cfpassword\"\r\n                  type=\"password\"\r\n                  id=\"inputPassword\"\r\n                  class=\"form-control rounded-pill\"\r\n                  placeholder=\"กรุณากรอกรหัสผ่าน\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ')\"\r\n                />\r\n              </div>\r\n              <button\r\n                type=\"submit\"\r\n                value=\"Login\"\r\n                class=\"btn btn-blue btn-block mt-4 rounded-pill text-white\"\r\n                :disabled=\"!cfpassword || !password\"\r\n              >\r\n               ยืนยน\r\n              </button>\r\n    \r\n              <hr class=\"mt-5\" />\r\n              <button @click=\"routerLogin\" class=\"btn btn-blue btn-block rounded-pill text-white\">\r\n                  <i class=\"fas fa-user-plus fa-lg mr-2\"></i> เข้าสู่ระบบ\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { required, minLength } from \"vuelidate/lib/validators\";\r\nimport authService from \"@/services/authService.js\";\r\nimport axios from \"axios\";\r\nimport { baseURL } from \"../../services/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tel: \"\",\r\n      password: \"\",\r\n      cfpassword: \"\",\r\n      msg: \"\",\r\n      text: \"\",\r\n      logo: \"\",\r\n      emailBlured: false,\r\n      valid: false,\r\n      submitted: false,\r\n      \r\n    };\r\n  },\r\n\r\n  // validations: {\r\n  //   tel: {\r\n  //     required,\r\n  //     minLength: minLength(10),\r\n  //   },\r\n  //   password: {\r\n  //     required,\r\n  //     minLength: minLength(8),\r\n  //   },\r\n  // },\r\n  mounted() {\r\n    //ดึงภาพโลโก้\r\n    axios({\r\n      method: \"get\",\r\n      url: baseURL + \"/photo/prefix\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access_token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        this.logo = response.data.data.prefix[0].logo;\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n  methods: {\r\n    routerLogin(){\r\n       this.$router.push(\"/login\");\r\n    },\r\n\r\n    async cfupdatepassword() {\r\n      try {\r\n\r\n\r\n          if(this.password !== this.cfpassword){\r\n                this.$toast.error(` รหัสผ่านไม่ตรงกัน `, {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n          });\r\n          }else{\r\n              let pwc = sessionStorage.getItem(\"pwc\");\r\n              const confirmpassword = {\r\n                password: this.password,\r\n                uuid: pwc\r\n    \r\n             };\r\n               await authService.updatepw(confirmpassword);\r\n              \r\n                this.$toast.success(\"สำเร็จ\", {\r\n                    position: \"top-right\",\r\n                    timeout: 1500,\r\n                });\r\n            \r\n            sessionStorage.removeItem(\"pwc\")\r\n            this.$router.push(\"/login\");\r\n            }\r\n\r\n          \r\n        \r\n       \r\n      } catch (error) {\r\n        this.$toast.error(error.response.data.error.message, {\r\n          position: \"top-right\",\r\n          timeout: 1500,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n"]}]}