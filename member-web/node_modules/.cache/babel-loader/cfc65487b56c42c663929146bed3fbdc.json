{"remainingRequest":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js!/Users/thossaporn/Downloads/game/member-web/node_modules/eslint-loader/index.js??ref--14-0!/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js","dependencies":[{"path":"/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js","mtime":1660317623430},{"path":"/Users/thossaporn/Downloads/game/member-web/babel.config.js","mtime":1629947196000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/cache-loader/dist/cjs.js","mtime":1656322782000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js","mtime":1656322786000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/eslint-loader/index.js","mtime":1656322784000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CgpleHBvcnRzLmhhbmRsZXIgPSBhc3luYyBmdW5jdGlvbiAoY29udGV4dCwgZXZlbnQsIGNhbGxiYWNrKSB7CiAgY29uc3QgcmVzcG9uc2UgPSBuZXcgdHdpbGlvLlJlc3BvbnNlKCk7CiAgcmVzcG9uc2UuYXBwZW5kSGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpOwogIC8qCiAgICogdW5jb21tZW50IHRvIHN1cHBvcnQgQ09SUwogICAqIHJlc3BvbnNlLmFwcGVuZEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTsKICAgKiByZXNwb25zZS5hcHBlbmRIZWFkZXIoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnUE9TVCwgT1BUSU9OUycpOwogICAqIHJlc3BvbnNlLmFwcGVuZEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVycycsICdDb250ZW50LVR5cGUnKTsKICAgKi8KCiAgdHJ5IHsKICAgIGlmICh0eXBlb2YgZXZlbnQudG8gPT09ICd1bmRlZmluZWQnIHx8IGV2ZW50LnRvLnRyaW0oKSA9PT0gJycpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCJNaXNzaW5nICd0bycgcGFyYW1ldGVyOyBwbGVhc2UgcHJvdmlkZSBhIHBob25lIG51bWJlciBvciBlbWFpbC4iKTsKICAgIH0KICAgIC8qCiAgICAgKiBERUxFVEUgVEhJUyBCTE9DSyBJRiBZT1UgV0FOVCBUTyBFTkFCTEUgVEhFIFZPSUNFIENIQU5ORUwKICAgICAqIExlYXJuIG1vcmUgYWJvdXQgdG9sbCBmcmF1ZAogICAgICogaHR0cHM6Ly93d3cudHdpbGlvLmNvbS9kb2NzL3ZlcmlmeS9wcmV2ZW50aW5nLXRvbGwtZnJhdWQKICAgICAqLwoKCiAgICBpZiAoZXZlbnQuY2hhbm5lbCA9PT0gJ2NhbGwnKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FsbHMgZGlzYWJsZWQgYnkgZGVmYXVsdC4gVXBkYXRlIHRoZSBjb2RlIGluIDxjb2RlPnN0YXJ0LXZlcmlmeS5qczwvY29kZT4gdG8gZW5hYmxlLicpOwogICAgfQoKICAgIGNvbnN0IGNsaWVudCA9IGNvbnRleHQuZ2V0VHdpbGlvQ2xpZW50KCk7IC8vIGNvbnN0IHNlcnZpY2UgPSBjb250ZXh0LlZFUklGWV9TRVJWSUNFX1NJRDsKCiAgICBjb25zdCBzZXJ2aWNlID0gIlNLNmVhMTExNTc3YmVkMjBkNjM2NTNhOGU1MmY0ZTY2NTgiOwogICAgY29uc3QgewogICAgICB0bwogICAgfSA9IGV2ZW50OwogICAgY29uc3QgY2hhbm5lbCA9IHR5cGVvZiBldmVudC5jaGFubmVsID09PSAndW5kZWZpbmVkJyA/ICdzbXMnIDogZXZlbnQuY2hhbm5lbDsKICAgIGNvbnN0IGxvY2FsZSA9IHR5cGVvZiBldmVudC5sb2NhbGUgPT09ICd1bmRlZmluZWQnID8gJ2VuJyA6IGV2ZW50LmxvY2FsZTsKICAgIGNvbnN0IHZlcmlmaWNhdGlvbiA9IGF3YWl0IGNsaWVudC52ZXJpZnkuc2VydmljZXMoc2VydmljZSkudmVyaWZpY2F0aW9ucy5jcmVhdGUoewogICAgICB0bywKICAgICAgY2hhbm5lbCwKICAgICAgbG9jYWxlCiAgICB9KTsKICAgIGNvbnNvbGUubG9nKGBTZW50IHZlcmlmaWNhdGlvbjogJyR7dmVyaWZpY2F0aW9uLnNpZH0nYCk7CiAgICByZXNwb25zZS5zZXRTdGF0dXNDb2RlKDIwMCk7CiAgICByZXNwb25zZS5zZXRCb2R5KHsKICAgICAgc3VjY2VzczogdHJ1ZQogICAgfSk7CiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zdCBzdGF0dXNDb2RlID0gZXJyb3Iuc3RhdHVzIHx8IDQwMDsKICAgIHJlc3BvbnNlLnNldFN0YXR1c0NvZGUoc3RhdHVzQ29kZSk7CiAgICByZXNwb25zZS5zZXRCb2R5KHsKICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlCiAgICB9KTsKICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7CiAgfQp9Ow=="},{"version":3,"names":["exports","handler","context","event","callback","response","twilio","Response","appendHeader","to","trim","Error","channel","client","getTwilioClient","service","locale","verification","verify","services","verifications","create","console","log","sid","setStatusCode","setBody","success","error","statusCode","status","message"],"sources":["/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js"],"sourcesContent":[" exports.handler = async function (context, event, callback) {\n    const response = new twilio.Response();\n    response.appendHeader('Content-Type', 'application/json');\n  \n    /*\n     * uncomment to support CORS\n     * response.appendHeader('Access-Control-Allow-Origin', '*');\n     * response.appendHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');\n     * response.appendHeader('Access-Control-Allow-Headers', 'Content-Type');\n     */\n  \n    try {\n      if (typeof event.to === 'undefined' || event.to.trim() === '') {\n        throw new Error(\n          \"Missing 'to' parameter; please provide a phone number or email.\"\n        );\n      }\n  \n      /*\n       * DELETE THIS BLOCK IF YOU WANT TO ENABLE THE VOICE CHANNEL\n       * Learn more about toll fraud\n       * https://www.twilio.com/docs/verify/preventing-toll-fraud\n       */\n      if (event.channel === 'call') {\n        throw new Error(\n          'Calls disabled by default. Update the code in <code>start-verify.js</code> to enable.'\n        );\n      }\n  \n      const client = context.getTwilioClient();\n      // const service = context.VERIFY_SERVICE_SID;\n      const service =\"SK6ea111577bed20d63653a8e52f4e6658\";\n      const { to } = event;\n      const channel =\n        typeof event.channel === 'undefined' ? 'sms' : event.channel;\n      const locale = typeof event.locale === 'undefined' ? 'en' : event.locale;\n  \n      const verification = await client.verify\n        .services(service)\n        .verifications.create({\n          to,\n          channel,\n          locale,\n        });\n  \n      console.log(`Sent verification: '${verification.sid}'`);\n      response.setStatusCode(200);\n      response.setBody({ success: true });\n      return callback(null, response);\n    } catch (error) {\n      const statusCode = error.status || 400;\n      response.setStatusCode(statusCode);\n      response.setBody({\n        success: false,\n        error: error.message,\n      });\n      return callback(null, response);\n    }\n  };\n\n"],"mappings":";;AAACA,OAAO,CAACC,OAAR,GAAkB,gBAAgBC,OAAhB,EAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;EACzD,MAAMC,QAAQ,GAAG,IAAIC,MAAM,CAACC,QAAX,EAAjB;EACAF,QAAQ,CAACG,YAAT,CAAsB,cAAtB,EAAsC,kBAAtC;EAEA;AACJ;AACA;AACA;AACA;AACA;;EAEI,IAAI;IACF,IAAI,OAAOL,KAAK,CAACM,EAAb,KAAoB,WAApB,IAAmCN,KAAK,CAACM,EAAN,CAASC,IAAT,OAAoB,EAA3D,EAA+D;MAC7D,MAAM,IAAIC,KAAJ,CACJ,iEADI,CAAN;IAGD;IAED;AACN;AACA;AACA;AACA;;;IACM,IAAIR,KAAK,CAACS,OAAN,KAAkB,MAAtB,EAA8B;MAC5B,MAAM,IAAID,KAAJ,CACJ,uFADI,CAAN;IAGD;;IAED,MAAME,MAAM,GAAGX,OAAO,CAACY,eAAR,EAAf,CAlBE,CAmBF;;IACA,MAAMC,OAAO,GAAE,oCAAf;IACA,MAAM;MAAEN;IAAF,IAASN,KAAf;IACA,MAAMS,OAAO,GACX,OAAOT,KAAK,CAACS,OAAb,KAAyB,WAAzB,GAAuC,KAAvC,GAA+CT,KAAK,CAACS,OADvD;IAEA,MAAMI,MAAM,GAAG,OAAOb,KAAK,CAACa,MAAb,KAAwB,WAAxB,GAAsC,IAAtC,GAA6Cb,KAAK,CAACa,MAAlE;IAEA,MAAMC,YAAY,GAAG,MAAMJ,MAAM,CAACK,MAAP,CACxBC,QADwB,CACfJ,OADe,EAExBK,aAFwB,CAEVC,MAFU,CAEH;MACpBZ,EADoB;MAEpBG,OAFoB;MAGpBI;IAHoB,CAFG,CAA3B;IAQAM,OAAO,CAACC,GAAR,CAAa,uBAAsBN,YAAY,CAACO,GAAI,GAApD;IACAnB,QAAQ,CAACoB,aAAT,CAAuB,GAAvB;IACApB,QAAQ,CAACqB,OAAT,CAAiB;MAAEC,OAAO,EAAE;IAAX,CAAjB;IACA,OAAOvB,QAAQ,CAAC,IAAD,EAAOC,QAAP,CAAf;EACD,CAtCD,CAsCE,OAAOuB,KAAP,EAAc;IACd,MAAMC,UAAU,GAAGD,KAAK,CAACE,MAAN,IAAgB,GAAnC;IACAzB,QAAQ,CAACoB,aAAT,CAAuBI,UAAvB;IACAxB,QAAQ,CAACqB,OAAT,CAAiB;MACfC,OAAO,EAAE,KADM;MAEfC,KAAK,EAAEA,KAAK,CAACG;IAFE,CAAjB;IAIA,OAAO3B,QAAQ,CAAC,IAAD,EAAOC,QAAP,CAAf;EACD;AACF,CA1DF"}]}