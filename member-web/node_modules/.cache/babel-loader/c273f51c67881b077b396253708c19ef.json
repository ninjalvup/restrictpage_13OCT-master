{"remainingRequest":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js!/Users/thossaporn/Downloads/game/member-web/node_modules/eslint-loader/index.js??ref--14-0!/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js","dependencies":[{"path":"/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js","mtime":1660409531804},{"path":"/Users/thossaporn/Downloads/game/member-web/babel.config.js","mtime":1629947196000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/cache-loader/dist/cjs.js","mtime":1656322782000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/babel-loader/lib/index.js","mtime":1656322786000},{"path":"/Users/thossaporn/Downloads/game/member-web/node_modules/eslint-loader/index.js","mtime":1656322784000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:cmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmVycm9yLmNhdXNlLmpzIik7CgpyZXF1aXJlKCdkb3RlbnYnKS5jb25maWcoKTsKCmNvbnN0IGFjY291bnRTaWQgPSBwcm9jZXNzLmVudi5UV0lMSU9fQUNDT1VOVF9TSUQ7CmNvbnNvbGUubG9nKGFjY291bnRTaWQpOwpjb25zdCBhdXRoVG9rZW4gPSBwcm9jZXNzLmVudi5UV0lMSU9fQVVUSF9UT0tFTjsKY29uc29sZS5sb2coYXV0aFRva2VuKTsKY29uc3QgdmVyaWZ5c2VydmljZSA9IHByb2Nlc3MuZW52LlRXSUxJT19WRVJJRllfU0VSVklDRV9TSUQ7Cgpjb25zdCB0d2lsaW8gPSByZXF1aXJlKCd0d2lsaW8nKTsKCmNvbnN0IGNsaWVudCA9IG5ldyB0d2lsaW8oYWNjb3VudFNpZCwgYXV0aFRva2VuKTsKCmV4cG9ydHMuaGFuZGxlciA9IGFzeW5jIGZ1bmN0aW9uIChjb250ZXh0LCBldmVudCwgY2FsbGJhY2spIHsKICBjb25zdCByZXNwb25zZSA9IG5ldyB0d2lsaW8uUmVzcG9uc2UoKTsKICByZXNwb25zZS5hcHBlbmRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7CiAgLyoKICAgKiB1bmNvbW1lbnQgdG8gc3VwcG9ydCBDT1JTCiAgICogcmVzcG9uc2UuYXBwZW5kSGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nLCAnKicpOwogICAqIHJlc3BvbnNlLmFwcGVuZEhlYWRlcignQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kcycsICdQT1NULCBPUFRJT05TJyk7CiAgICogcmVzcG9uc2UuYXBwZW5kSGVhZGVyKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1IZWFkZXJzJywgJ0NvbnRlbnQtVHlwZScpOwogICAqLwoKICB0cnkgewogICAgaWYgKHR5cGVvZiBldmVudC50byA9PT0gJ3VuZGVmaW5lZCcgfHwgZXZlbnQudG8udHJpbSgpID09PSAnJykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIk1pc3NpbmcgJ3RvJyBwYXJhbWV0ZXI7IHBsZWFzZSBwcm92aWRlIGEgcGhvbmUgbnVtYmVyIG9yIGVtYWlsLiIpOwogICAgfQogICAgLyoKICAgICAqIERFTEVURSBUSElTIEJMT0NLIElGIFlPVSBXQU5UIFRPIEVOQUJMRSBUSEUgVk9JQ0UgQ0hBTk5FTAogICAgICogTGVhcm4gbW9yZSBhYm91dCB0b2xsIGZyYXVkCiAgICAgKiBodHRwczovL3d3dy50d2lsaW8uY29tL2RvY3MvdmVyaWZ5L3ByZXZlbnRpbmctdG9sbC1mcmF1ZAogICAgICovCgoKICAgIGlmIChldmVudC5jaGFubmVsID09PSAnY2FsbCcpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYWxscyBkaXNhYmxlZCBieSBkZWZhdWx0LiBVcGRhdGUgdGhlIGNvZGUgaW4gPGNvZGU+c3RhcnQtdmVyaWZ5LmpzPC9jb2RlPiB0byBlbmFibGUuJyk7CiAgICB9CgogICAgY29uc3QgY2xpZW50ID0gY29udGV4dC5nZXRUd2lsaW9DbGllbnQoKTsgLy8gY29uc3Qgc2VydmljZSA9IGNvbnRleHQuVkVSSUZZX1NFUlZJQ0VfU0lEOwoKICAgIGNvbnN0IHsKICAgICAgdG8KICAgIH0gPSBldmVudDsKICAgIGNvbnN0IGNoYW5uZWwgPSB0eXBlb2YgZXZlbnQuY2hhbm5lbCA9PT0gJ3VuZGVmaW5lZCcgPyAnc21zJyA6IGV2ZW50LmNoYW5uZWw7CiAgICBjb25zdCBsb2NhbGUgPSB0eXBlb2YgZXZlbnQubG9jYWxlID09PSAndW5kZWZpbmVkJyA/ICdlbicgOiBldmVudC5sb2NhbGU7CiAgICBjb25zdCB2ZXJpZmljYXRpb24gPSBhd2FpdCBjbGllbnQudmVyaWZ5LnNlcnZpY2VzKHZlcmlmeXNlcnZpY2UpLnZlcmlmaWNhdGlvbnMuY3JlYXRlKHsKICAgICAgdG8sCiAgICAgIGNoYW5uZWwsCiAgICAgIGxvY2FsZQogICAgfSk7CiAgICBjb25zb2xlLmxvZyhgU2VudCB2ZXJpZmljYXRpb246ICcke3ZlcmlmaWNhdGlvbi5zaWR9J2ApOwogICAgcmVzcG9uc2Uuc2V0U3RhdHVzQ29kZSgyMDApOwogICAgcmVzcG9uc2Uuc2V0Qm9keSh7CiAgICAgIHN1Y2Nlc3M6IHRydWUKICAgIH0pOwogICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3BvbnNlKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc3Qgc3RhdHVzQ29kZSA9IGVycm9yLnN0YXR1cyB8fCA0MDA7CiAgICByZXNwb25zZS5zZXRTdGF0dXNDb2RlKHN0YXR1c0NvZGUpOwogICAgcmVzcG9uc2Uuc2V0Qm9keSh7CiAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICBlcnJvcjogZXJyb3IubWVzc2FnZQogICAgfSk7CiAgICByZXR1cm4gY2FsbGJhY2sobnVsbCwgcmVzcG9uc2UpOwogIH0KfTs="},{"version":3,"names":["require","config","accountSid","process","env","TWILIO_ACCOUNT_SID","console","log","authToken","TWILIO_AUTH_TOKEN","verifyservice","TWILIO_VERIFY_SERVICE_SID","twilio","client","exports","handler","context","event","callback","response","Response","appendHeader","to","trim","Error","channel","getTwilioClient","locale","verification","verify","services","verifications","create","sid","setStatusCode","setBody","success","error","statusCode","status","message"],"sources":["/Users/thossaporn/Downloads/game/member-web/src/services/start-verify.js"],"sourcesContent":["require('dotenv').config();  \nconst accountSid = process.env.TWILIO_ACCOUNT_SID;\nconsole.log(accountSid);\nconst authToken = process.env.TWILIO_AUTH_TOKEN;\nconsole.log(authToken);\n\nconst verifyservice = process.env.TWILIO_VERIFY_SERVICE_SID;\n\nconst twilio = require('twilio');\nconst client = new twilio(accountSid, authToken);\n\n exports.handler = async function (context, event, callback) {\n    const response = new twilio.Response();\n    response.appendHeader('Content-Type', 'application/json');\n  \n    /*\n     * uncomment to support CORS\n     * response.appendHeader('Access-Control-Allow-Origin', '*');\n     * response.appendHeader('Access-Control-Allow-Methods', 'POST, OPTIONS');\n     * response.appendHeader('Access-Control-Allow-Headers', 'Content-Type');\n     */\n  \n    try {\n      if (typeof event.to === 'undefined' || event.to.trim() === '') {\n        throw new Error(\n          \"Missing 'to' parameter; please provide a phone number or email.\"\n        );\n      }\n  \n      /*\n       * DELETE THIS BLOCK IF YOU WANT TO ENABLE THE VOICE CHANNEL\n       * Learn more about toll fraud\n       * https://www.twilio.com/docs/verify/preventing-toll-fraud\n       */\n      if (event.channel === 'call') {\n        throw new Error(\n          'Calls disabled by default. Update the code in <code>start-verify.js</code> to enable.'\n        );\n      }\n  \n      const client = context.getTwilioClient();\n      // const service = context.VERIFY_SERVICE_SID;\n      const { to } = event;\n      const channel =\n        typeof event.channel === 'undefined' ? 'sms' : event.channel;\n      const locale = typeof event.locale === 'undefined' ? 'en' : event.locale;\n  \n      const verification = await client.verify\n        .services(verifyservice)\n        .verifications.create({\n          to,\n          channel,\n          locale,\n        });\n  \n      console.log(`Sent verification: '${verification.sid}'`);\n      response.setStatusCode(200);\n      response.setBody({ success: true });\n      return callback(null, response);\n    } catch (error) {\n      const statusCode = error.status || 400;\n      response.setStatusCode(statusCode);\n      response.setBody({\n        success: false,\n        error: error.message,\n      });\n      return callback(null, response);\n    }\n  };\n\n"],"mappings":";;AAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBC,MAAlB;;AACA,MAAMC,UAAU,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAA/B;AACAC,OAAO,CAACC,GAAR,CAAYL,UAAZ;AACA,MAAMM,SAAS,GAAGL,OAAO,CAACC,GAAR,CAAYK,iBAA9B;AACAH,OAAO,CAACC,GAAR,CAAYC,SAAZ;AAEA,MAAME,aAAa,GAAGP,OAAO,CAACC,GAAR,CAAYO,yBAAlC;;AAEA,MAAMC,MAAM,GAAGZ,OAAO,CAAC,QAAD,CAAtB;;AACA,MAAMa,MAAM,GAAG,IAAID,MAAJ,CAAWV,UAAX,EAAuBM,SAAvB,CAAf;;AAECM,OAAO,CAACC,OAAR,GAAkB,gBAAgBC,OAAhB,EAAyBC,KAAzB,EAAgCC,QAAhC,EAA0C;EACzD,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,QAAX,EAAjB;EACAD,QAAQ,CAACE,YAAT,CAAsB,cAAtB,EAAsC,kBAAtC;EAEA;AACJ;AACA;AACA;AACA;AACA;;EAEI,IAAI;IACF,IAAI,OAAOJ,KAAK,CAACK,EAAb,KAAoB,WAApB,IAAmCL,KAAK,CAACK,EAAN,CAASC,IAAT,OAAoB,EAA3D,EAA+D;MAC7D,MAAM,IAAIC,KAAJ,CACJ,iEADI,CAAN;IAGD;IAED;AACN;AACA;AACA;AACA;;;IACM,IAAIP,KAAK,CAACQ,OAAN,KAAkB,MAAtB,EAA8B;MAC5B,MAAM,IAAID,KAAJ,CACJ,uFADI,CAAN;IAGD;;IAED,MAAMX,MAAM,GAAGG,OAAO,CAACU,eAAR,EAAf,CAlBE,CAmBF;;IACA,MAAM;MAAEJ;IAAF,IAASL,KAAf;IACA,MAAMQ,OAAO,GACX,OAAOR,KAAK,CAACQ,OAAb,KAAyB,WAAzB,GAAuC,KAAvC,GAA+CR,KAAK,CAACQ,OADvD;IAEA,MAAME,MAAM,GAAG,OAAOV,KAAK,CAACU,MAAb,KAAwB,WAAxB,GAAsC,IAAtC,GAA6CV,KAAK,CAACU,MAAlE;IAEA,MAAMC,YAAY,GAAG,MAAMf,MAAM,CAACgB,MAAP,CACxBC,QADwB,CACfpB,aADe,EAExBqB,aAFwB,CAEVC,MAFU,CAEH;MACpBV,EADoB;MAEpBG,OAFoB;MAGpBE;IAHoB,CAFG,CAA3B;IAQArB,OAAO,CAACC,GAAR,CAAa,uBAAsBqB,YAAY,CAACK,GAAI,GAApD;IACAd,QAAQ,CAACe,aAAT,CAAuB,GAAvB;IACAf,QAAQ,CAACgB,OAAT,CAAiB;MAAEC,OAAO,EAAE;IAAX,CAAjB;IACA,OAAOlB,QAAQ,CAAC,IAAD,EAAOC,QAAP,CAAf;EACD,CArCD,CAqCE,OAAOkB,KAAP,EAAc;IACd,MAAMC,UAAU,GAAGD,KAAK,CAACE,MAAN,IAAgB,GAAnC;IACApB,QAAQ,CAACe,aAAT,CAAuBI,UAAvB;IACAnB,QAAQ,CAACgB,OAAT,CAAiB;MACfC,OAAO,EAAE,KADM;MAEfC,KAAK,EAAEA,KAAK,CAACG;IAFE,CAAjB;IAIA,OAAOtB,QAAQ,CAAC,IAAD,EAAOC,QAAP,CAAf;EACD;AACF,CAzDF"}]}