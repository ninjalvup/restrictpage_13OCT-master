{"remainingRequest":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\src\\components\\pages\\login.vue","mtime":1656752110957},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\babel.config.js","mtime":1629947196000},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1656322787546},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1656322783050},{"path":"C:\\Users\\MYPC\\Desktop\\member-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1656322788972}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8gaW1wb3J0IHsgcmVxdWlyZWQsIG1pbkxlbmd0aCB9IGZyb20gInZ1ZWxpZGF0ZS9saWIvdmFsaWRhdG9ycyI7CmltcG9ydCBhdXRoU2VydmljZSBmcm9tICJAL3NlcnZpY2VzL2F1dGhTZXJ2aWNlLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IHsgYmFzZVVSTCwgcGF0aCB9IGZyb20gIi4uLy4uL3NlcnZpY2VzL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGVsOiAiIiwKICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICBtc2c6ICIiLAogICAgICB0ZXh0OiAiIiwKICAgICAgbG9nbzogIiIsCiAgICAgIHBhdGg6ICIiLAogICAgICBlbWFpbEJsdXJlZDogZmFsc2UsCiAgICAgIHZhbGlkOiBmYWxzZSwKICAgICAgc3VibWl0dGVkOiBmYWxzZQogICAgfTsKICB9LAoKICAvLyB2YWxpZGF0aW9uczogewogIC8vICAgdGVsOiB7CiAgLy8gICAgIHJlcXVpcmVkLAogIC8vICAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCgxMCksCiAgLy8gICB9LDEwOAogIC8vICAgcGFzc3dvcmQ6IHsKICAvLyAgICAgcmVxdWlyZWQsCiAgLy8gICAgIG1pbkxlbmd0aDogbWluTGVuZ3RoKDgpLAogIC8vICAgfSwKICAvLyB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnBhdGggPSBwYXRoICsgImFkbWluL2ltYWdlcy8iOwogICAgY29uc29sZS5sb2cocGF0aCk7IC8v4LiU4Li24LiH4Lig4Liy4Lie4LmC4Lil4LmC4LiB4LmJCgogICAgYXhpb3MoewogICAgICBtZXRob2Q6ICJnZXQiLAogICAgICB1cmw6IGJhc2VVUkwgKyAiL3Bob3RvL3ByZWZpeCIsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIiArIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFjY2Vzc190b2tlbiIpCiAgICAgIH0KICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEuZGF0YS5wcmVmaXhbMF0ubG9nbyk7CiAgICAgIHRoaXMubG9nbyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wcmVmaXhbMF0ubG9nbzsKICAgICAgbGV0IHJlZ3ggPSAvXC4oZ2lmfGpwZT9nfHRpZmY/fHBuZ3x3ZWJwfGJtcCkkL2kudGVzdCh0aGlzLmxvZ28pOwoKICAgICAgaWYgKHJlZ3ggPT09IGZhbHNlKSB7CiAgICAgICAgY29uc29sZS5sb2coImlmIik7CiAgICAgICAgdGhpcy5sb2dvID0gcmVxdWlyZSgiLi4vLi4vLi4vcHVibGljL2Fzc2V0cy9pbWFnZXMvTG9nby5wbmciKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygiZWxkZSIpOwogICAgICAgIHRoaXMubG9nbyA9IHJlc3BvbnNlLmRhdGEuZGF0YS5wcmVmaXhbMF0ubG9nbzsKICAgICAgfQogICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICB9KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICByb3V0ZXJSZWdpc3RlcigpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yZWdpc3RlciIpOwogICAgfSwKCiAgICAvL+C5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4mgogICAgYXN5bmMgbG9naW4oKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgbG9naW5Gb3JtID0gewogICAgICAgICAgdGVsOiB0aGlzLnRlbCwKICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXNwID0gYXdhaXQgYXV0aFNlcnZpY2UubG9naW5BZG1pbihsb2dpbkZvcm0pOwoKICAgICAgICBpZiAocmVzcC5zdWNjZXNzID09IHRydWUpIHsKICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoIuC5gOC4guC5ieC4suC4quC4ueC5iOC4o+C4sOC4muC4muC5gOC4o+C4teC4ouC4muC4o+C5ieC4reC4ouC5geC4peC5ieC4pyIsIHsKICAgICAgICAgICAgcG9zaXRpb246ICJ0b3AtcmlnaHQiLAogICAgICAgICAgICB0aW1lb3V0OiAxNTAwCiAgICAgICAgICB9KTsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImFjY2Vzc190b2tlbiIsIHJlc3AuYWNjZXNzX3Rva2VuKTsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvaG9tZSIpOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOwogICAgICAgICAgfSwgNTAwKTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kdG9hc3QuZXJyb3IoZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvci5tZXNzYWdlLCB7CiAgICAgICAgICBwb3NpdGlvbjogInRvcC1yaWdodCIsCiAgICAgICAgICB0aW1lb3V0OiAxNTAwCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;EACAA;IACA;MACAC,OADA;MAEAC,YAFA;MAGAC,OAHA;MAIAC,QAJA;MAKAC,QALA;MAMAC,QANA;MAOAC,kBAPA;MAQAC,YARA;MASAC;IATA;EAWA,CAbA;;EAeA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEAC;IACA;IACAC,kBAFA,CAGA;;IACAC;MACAC,aADA;MAEAC,8BAFA;MAGAC;QACA,kCADA;QAEAC;MAFA;IAHA,GAQAC,IARA,CAQAC;MACAP;MACAA;MACA;MACA;;MACA;QACAA;QACA;MACA,CAHA,MAGA;QACAA;QACA;MACA;IACA,CApBA,EAqBAQ,KArBA,CAqBAC;MACAT;IACA,CAvBA;EAwBA,CAtDA;;EAwDAU;IACAC;MACA;IACA,CAHA;;IAIA;IACA;MACA;QACA;UACArB,aADA;UAEAC;QAFA;QAIA;;QACA;UACA;YACAqB,qBADA;YAEAC;UAFA;UAIAC;UACA;UAEAC;YACAC;UACA,CAFA,EAEA,GAFA;QAGA;MACA,CAlBA,CAkBA;QACA;UACAJ,qBADA;UAEAC;QAFA;MAIA;IACA;;EA9BA;AAxDA","names":["data","tel","password","msg","text","logo","path","emailBlured","valid","submitted","mounted","console","axios","method","url","headers","Authorization","then","response","catch","error","methods","routerRegister","position","timeout","sessionStorage","setTimeout","location"],"sourceRoot":"src/components/pages","sources":["login.vue"],"sourcesContent":["<template>\r\n  <div class=\"login\">\r\n    <div class=\"row mt-5\">\r\n      <div class=\"col-sm-9 col-md-7 col-lg-5 mx-auto\">\r\n        <div class=\"text-center mb-4\">\r\n          <img v-bind:src=\"logo\" class=\"rounded\" alt=\"...\" width=\"50%\" />\r\n          <!-- <div v-if=\"logo ==path\" >asd</div> -->\r\n        </div>\r\n        <!-- <div class=\"text-center\">\r\n          <div class=\"logo\">\r\n            <img v-bind:src=\"logo\" width=\"80%\" />\r\n          </div>\r\n        </div> -->\r\n        <div class=\"card-signin my-5 rounded\"\r\n                    style=\"\r\n              background-image: url(assets/images/custom/bg-menu.png);\r\n              background-size: cover;\r\n              background-repeat: no-repeat;\r\n              position: relative;\r\n              background-position: center;\r\n            \">\r\n          <div class=\"card-body mb-3 mt-3 p-5\">\r\n            <h6 class=\"text-fast-auto text-center\">เข้าสู่ระบบ</h6>\r\n            <!-- <h5 class=\"card-title text-center\">Payment Auto </h5> -->\r\n            <form v-on:submit.prevent=\"login\">\r\n              <div class=\"form-label-group\">\r\n                <label for=\"inputTel\">เบอร์โทร</label>\r\n                <span class=\"mb-3\" style=\"color: red\"> {{ text }}</span>\r\n                <input\r\n                  v-model=\"tel\"\r\n                  type=\"tel\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"กรุณากรอกเบอร์มือถือ\"\r\n                  minlength=\"8\"\r\n                  maxlength=\"10\"\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ 10 หลัก')\"\r\n                />\r\n              </div>\r\n              <div class=\"form-label-group mt-2\">\r\n                <label for=\"inputPassword\">รหัสผ่าน</label>\r\n                <input\r\n                  v-model=\"password\"\r\n                  type=\"password\"\r\n                  id=\"inputPassword\"\r\n                  class=\"form-control\"\r\n                  placeholder=\"กรุณากรอกรหัสผ่าน\"\r\n                  autocomplete=\"off\"\r\n                  required\r\n                  oninvalid=\"this.setCustomValidity('กรุณากรอกหมายเลขโทรศัพท์ให้ครบ')\"\r\n                />\r\n              </div>\r\n              <div class=\"justify-content-center pt-3\">\r\n                <button\r\n                  type=\"submit\"\r\n                  value=\"Login\"\r\n                  class=\"btn btn-gradient w-100\"\r\n                >\r\n                  <i class=\"fas fa-sign-in-alt fa-lg mr-2\"></i>เข้าสู่ระบบ\r\n                </button>\r\n              </div>\r\n\r\n              <div class=\"\">\r\n                <span>\r\n                  <router-link to=\"/forgotpassword\">\r\n                    <a class=\"float-right mt-2 mr-3\"\r\n                      >ลืมรหัสผ่าน ?</a\r\n                    ></router-link\r\n                  >\r\n                </span>\r\n              </div>\r\n              <hr class=\"mt-5\" />\r\n              <button\r\n                @click=\"routerRegister\"\r\n                class=\"btn btn btn-gradient w-100\"\r\n              >\r\n                <i class=\"fas fa-user-plus fa-lg mr-2\"></i> สมัครสมาชิก\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// import { required, minLength } from \"vuelidate/lib/validators\";\r\nimport authService from \"@/services/authService.js\";\r\nimport axios from \"axios\";\r\nimport { baseURL, path } from \"../../services/api\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tel: \"\",\r\n      password: \"\",\r\n      msg: \"\",\r\n      text: \"\",\r\n      logo: \"\",\r\n      path: \"\",\r\n      emailBlured: false,\r\n      valid: false,\r\n      submitted: false,\r\n    };\r\n  },\r\n\r\n  // validations: {\r\n  //   tel: {\r\n  //     required,\r\n  //     minLength: minLength(10),\r\n  //   },108\r\n  //   password: {\r\n  //     required,\r\n  //     minLength: minLength(8),\r\n  //   },\r\n  // },\r\n\r\n  mounted() {\r\n    this.path = path + \"admin/images/\";\r\n    console.log(path);\r\n    //ดึงภาพโลโก้\r\n    axios({\r\n      method: \"get\",\r\n      url: baseURL + \"/photo/prefix\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + sessionStorage.getItem(\"access_token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        console.log(response);\r\n        console.log(response.data.data.prefix[0].logo);\r\n        this.logo = response.data.data.prefix[0].logo;\r\n        let regx = /\\.(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(this.logo);\r\n        if (regx === false) {\r\n          console.log(\"if\");\r\n          this.logo = require(\"../../../public/assets/images/Logo.png\");\r\n        } else {\r\n          console.log(\"elde\");\r\n          this.logo = response.data.data.prefix[0].logo;\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  },\r\n\r\n  methods: {\r\n    routerRegister() {\r\n      this.$router.push(\"/register\");\r\n    },\r\n    //เข้าสู่ระบบ\r\n    async login() {\r\n      try {\r\n        const loginForm = {\r\n          tel: this.tel,\r\n          password: this.password,\r\n        };\r\n        const resp = await authService.loginAdmin(loginForm);\r\n        if (resp.success == true) {\r\n          this.$toast.success(\"เข้าสู่ระบบเรียบร้อยแล้ว\", {\r\n            position: \"top-right\",\r\n            timeout: 1500,\r\n          });\r\n          sessionStorage.setItem(\"access_token\", resp.access_token);\r\n          this.$router.push(\"/home\");\r\n\r\n          setTimeout(function() {\r\n            location.reload();\r\n          }, 500);\r\n        }\r\n      } catch (error) {\r\n        this.$toast.error(error.response.data.error.message, {\r\n          position: \"top-right\",\r\n          timeout: 1500,\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.btn-gradient {\r\n  background-image: linear-gradient(270deg, #01b3d7, #017fd7);\r\n  border-width: 0;\r\n  color: #fff !important;\r\n}\r\n.form-control {\r\n  display: block;\r\n  width: 100%;\r\n  height: calc(1.5em + 0.75rem + 2px);\r\n  padding: 0.375rem 0.75rem;\r\n  font-size: 1rem;\r\n  font-weight: 400;\r\n  line-height: 1.5;\r\n  color: #000;\r\n  background-color: #fff;\r\n  background-clip: padding-box;\r\n  border: 1px solid #ced4da;\r\n  border-radius: 0.25rem;\r\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\r\n  height: 40px;\r\n  box-shadow: 0 1px 4px 0 rgb(0 0 0 / 20%);\r\n  border: 1px solid #d8d8d8;\r\n  -moz-box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.2);\r\n  -webkit-box-shadow: 0 1px 4px 0 rgb(0 0 0 / 20%);\r\n}\r\n.text-fast-auto {\r\n\r\n  font-weight: bold;\r\n}\r\n* {\r\n  color: #000;\r\n  font-weight: 700 !important;\r\n}\r\n</style>\r\n<style>\r\nbody {\r\n  background-position: center;\r\n  background-size: cover;\r\n  background-repeat: no-repeat;\r\n  background-attachment: fixed;\r\n  /* background-image: url(\"../../../public/assets/images/input.jpg\"); */\r\n}\r\n\r\n</style>\r\n"]}]}